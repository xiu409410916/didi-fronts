(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["common/main"],{"2bd4":function(e,t,n){"use strict";n.r(t);var o=n("9f7e"),a=n.n(o);for(var c in o)"default"!==c&&function(e){n.d(t,e,function(){return o[e]})}(c);t["default"]=a.a},"71a5":function(e,t,n){"use strict";var o=n("d270"),a=n.n(o);a.a},"84a0":function(e,t,n){"use strict";n.r(t);var o=n("2bd4");for(var a in o)"default"!==a&&function(e){n.d(t,e,function(){return o[e]})}(a);n("71a5");var c,r,u=n("2877"),i=Object(u["a"])(o["default"],c,r,!1,null,null,null);t["default"]=i.exports},"9f7e":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n("f776"),a={globalData:{socket:""},onLaunch:function(){console.log("App Launch");var t=this;e.login({provider:"weixin",success:function(e){var n=e.code;t.loginByCode(n)},error:function(e){console.log(e)}});var n=[];if(!e.getStorageSync("messageList")){n=[];e.setStorageSync("messageList",n)}},onShow:function(){console.log("App Show"),e.removeStorageSync("updateCart"),this.getHistoryMessage()},onHide:function(){console.log("App Hide")},methods:{getHistoryMessage:function(){var t=this,n=e.getStorageSync("patientInfo");null!=n&&(e.showToast({icon:"none",title:"加载消息中...",mask:!0}),this.$util.request({url:"/didi-patient/message/getUserUnreadedMessage",param:{userId:n.openId},contentType:"application/x-www-form-urlencoded",success:function(e){var n=e.data;if(null!=n&&n.length>0)for(var o=0;o<n.length;o++){var a=n[o];console.log(a),t.$util.updateMessage(a,"0")}},error:function(){}}))},loginByCode:function(t){var n=this,o={};o.code=t,n.$util.request({url:"/didi-doctor/ex/login/login_by_weixin",param:o,contentType:"application/x-www-form-urlencoded",success:function(t){e.setStorageSync("Token",t.data.openId),e.setStorageSync("doctorInfo",t.data),n.connectMsgServer(t.data)},error:function(){}})},connectMsgServer:function(t){var n=this,a=t.openId,c="http://localhost:9092?token="+a,r=o.connect(c);getApp().globalData.socket=r,r.on("connect",function(){console.log("系统通知: "+a+"成功连接至websocket服务器")}),r.on("disconnect",function(){console.log("系统通知: "+a+"已从websocket服务器断开连接")}),r.on("chat",function(t){var o=t;n.$util.updateMessage(o,"0"),e.vibrateLong(),console.log("系统通知: 收到来自"+t.username+"的悄悄话:"+t.msg.content)})}}};t.default=a}).call(this,n("543d")["default"])},d270:function(e,t,n){},ee4c:function(e,t,n){"use strict";(function(e){n("6024"),n("921b");var t=u(n("66fd")),o=u(n("84a0")),a=u(n("51f8")),c=u(n("eda9")),r=u(n("c6ae"));function u(e){return e&&e.__esModule?e:{default:e}}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){l(e,t,n[t])})}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.default.config.productionTip=!1,t.default.prototype.$util=a.default,t.default.prototype.$config=r.default,t.default.prototype.$json=c.default,o.default.mpType="app";var s=new t.default(i({},o.default));e(s).$mount()}).call(this,n("543d")["createApp"])}},[["ee4c","common/runtime","common/vendor"]]]);